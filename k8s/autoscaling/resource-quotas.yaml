apiVersion: v1
kind: ResourceQuota
metadata:
  name: example-production-quota
  namespace: default
  labels:
    environment: production
    component: resource-management
spec:
  hard:
    # Compute resources
    requests.cpu: "100"
    requests.memory: 200Gi
    limits.cpu: "300"
    limits.memory: 600Gi
    
    # Storage resources
    requests.storage: 1Ti
    persistentvolumeclaims: "50"
    
    # Network resources
    services: "20"
    services.loadbalancers: "5"
    services.nodeports: "10"
    
    # Object counts
    pods: "200"
    replicationcontrollers: "20"
    resourcequotas: "1"
    secrets: "100"
    configmaps: "100"
    persistentvolumeclaims: "50"
    
    # Priority class limits
    count/waqiti-critical-priority.scheduling.k8s.io: "20"
    count/waqiti-high-priority.scheduling.k8s.io: "50"
    count/waqiti-normal-priority.scheduling.k8s.io: "100"
    count/waqiti-low-priority.scheduling.k8s.io: "30"
---
apiVersion: v1
kind: ResourceQuota
metadata:
  name: waqiti-staging-quota
  namespace: staging
  labels:
    environment: staging
    component: resource-management
spec:
  hard:
    # Compute resources
    requests.cpu: "20"
    requests.memory: 40Gi
    limits.cpu: "60"
    limits.memory: 120Gi
    
    # Storage resources
    requests.storage: 200Gi
    persistentvolumeclaims: "20"
    
    # Network resources
    services: "10"
    services.loadbalancers: "2"
    
    # Object counts
    pods: "50"
    replicationcontrollers: "10"
    secrets: "50"
    configmaps: "50"
---
apiVersion: v1
kind: ResourceQuota
metadata:
  name: waqiti-development-quota
  namespace: development
  labels:
    environment: development
    component: resource-management
spec:
  hard:
    # Compute resources
    requests.cpu: "10"
    requests.memory: 20Gi
    limits.cpu: "30"
    limits.memory: 60Gi
    
    # Storage resources
    requests.storage: 100Gi
    persistentvolumeclaims: "10"
    
    # Network resources
    services: "5"
    
    # Object counts
    pods: "25"
    replicationcontrollers: "5"
    secrets: "25"
    configmaps: "25"
---
apiVersion: v1
kind: LimitRange
metadata:
  name: example-production-limits
  namespace: default
  labels:
    environment: production
    component: resource-management
spec:
  limits:
  # Container limits
  - type: Container
    default:
      cpu: 500m
      memory: 1Gi
    defaultRequest:
      cpu: 100m
      memory: 256Mi
    max:
      cpu: 4000m
      memory: 16Gi
    min:
      cpu: 50m
      memory: 128Mi
    maxLimitRequestRatio:
      cpu: 4
      memory: 4
  # Pod limits
  - type: Pod
    max:
      cpu: 8000m
      memory: 32Gi
    min:
      cpu: 100m
      memory: 256Mi
  # PVC limits
  - type: PersistentVolumeClaim
    max:
      storage: 100Gi
    min:
      storage: 1Gi
---
apiVersion: v1
kind: LimitRange
metadata:
  name: waqiti-staging-limits
  namespace: staging
  labels:
    environment: staging
    component: resource-management
spec:
  limits:
  - type: Container
    default:
      cpu: 200m
      memory: 512Mi
    defaultRequest:
      cpu: 50m
      memory: 128Mi
    max:
      cpu: 2000m
      memory: 8Gi
    min:
      cpu: 25m
      memory: 64Mi
  - type: Pod
    max:
      cpu: 4000m
      memory: 16Gi
    min:
      cpu: 50m
      memory: 128Mi
  - type: PersistentVolumeClaim
    max:
      storage: 50Gi
    min:
      storage: 1Gi
---
apiVersion: v1
kind: LimitRange
metadata:
  name: waqiti-development-limits
  namespace: development
  labels:
    environment: development
    component: resource-management
spec:
  limits:
  - type: Container
    default:
      cpu: 100m
      memory: 256Mi
    defaultRequest:
      cpu: 25m
      memory: 64Mi
    max:
      cpu: 1000m
      memory: 4Gi
    min:
      cpu: 10m
      memory: 32Mi
  - type: Pod
    max:
      cpu: 2000m
      memory: 8Gi
    min:
      cpu: 25m
      memory: 64Mi
  - type: PersistentVolumeClaim
    max:
      storage: 20Gi
    min:
      storage: 1Gi
---
# Network Policies for resource isolation
apiVersion: networking.k8s.io/v1
kind: NetworkPolicy
metadata:
  name: example-production-network-policy
  namespace: default
  labels:
    environment: production
    component: security
spec:
  podSelector: {}
  policyTypes:
  - Ingress
  - Egress
  ingress:
  - from:
    - namespaceSelector:
        matchLabels:
          name: default
    - namespaceSelector:
        matchLabels:
          name: monitoring
    - namespaceSelector:
        matchLabels:
          name: istio-system
    ports:
    - protocol: TCP
      port: 8080
    - protocol: TCP
      port: 8443
  egress:
  - to:
    - namespaceSelector:
        matchLabels:
          name: default
    - namespaceSelector:
        matchLabels:
          name: kube-system
    ports:
    - protocol: TCP
      port: 5432  # PostgreSQL
    - protocol: TCP
      port: 6379  # Redis
    - protocol: TCP
      port: 9092  # Kafka
    - protocol: TCP
      port: 443   # HTTPS
    - protocol: TCP
      port: 80    # HTTP
  - to: []  # Allow DNS
    ports:
    - protocol: UDP
      port: 53