# Redis configuration for Waqiti development environment
# Optimized for local development with persistence and security

# Network settings
bind 0.0.0.0
port 6379
timeout 300

# Memory management
maxmemory 1gb
maxmemory-policy allkeys-lru

# Persistence settings
save 900 1
save 300 10
save 60 10000

# Enable AOF for better durability
appendonly yes
appendfsync everysec
auto-aof-rewrite-percentage 100
auto-aof-rewrite-min-size 64mb

# Security
# requirepass waqiti_redis_dev  # Uncomment in production

# Logging
loglevel notice

# Performance tuning
tcp-keepalive 300
tcp-backlog 511

# Disable dangerous commands
rename-command FLUSHDB ""
rename-command FLUSHALL ""
rename-command DEBUG ""
rename-command CONFIG "WAQITI_CONFIG_b840fc02d524045429941cc15f59e41cb7be6c52"

# Client output buffer limits
client-output-buffer-limit normal 0 0 0
client-output-buffer-limit slave 256mb 64mb 60
client-output-buffer-limit pubsub 32mb 8mb 60

# Enable keyspace notifications for cache invalidation
notify-keyspace-events Ex

# Lua scripting
lua-time-limit 5000