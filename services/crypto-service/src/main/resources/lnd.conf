# LND Configuration for Waqiti Lightning Service

[Application Options]
# Node alias for the Lightning network
alias=Waqiti-Lightning-Node
color=#3399FF

# Enable REST API
restlisten=0.0.0.0:8080
rpclisten=0.0.0.0:10009

# Maximum channel size (wumbo channels)
protocol.wumbo-channels=true

# Database backend
db.backend=postgres
db.postgres.dsn=${LND_DATABASE_URL}

# Enable watchtower for channel protection
watchtower.active=true

# Autopilot for automatic channel management
autopilot.active=true
autopilot.maxchannels=10
autopilot.allocation=0.6
autopilot.minchansize=100000
autopilot.maxchansize=16777215

# Accept keysend payments
accept-keysend=true

# Accept AMP payments
accept-amp=true

# Minimum channel size
minchansize=100000

# CLTV expiry delta
bitcoin.timelockdelta=144

# Fee settings
bitcoin.feerate=1
bitcoin.basefee=1000
bitcoin.feerate=100

[Bitcoin]
bitcoin.active=true
bitcoin.mainnet=true  # Change to testnet for testing
bitcoin.node=bitcoind

[Bitcoind]
bitcoind.rpchost=bitcoin-core:8332
bitcoind.rpcuser=waqiti
bitcoind.rpcpass=${BITCOIN_RPC_PASSWORD}
bitcoind.zmqpubrawblock=tcp://bitcoin-core:28332
bitcoind.zmqpubrawtx=tcp://bitcoin-core:28333

[Prometheus]
# Enable Prometheus monitoring
prometheus.enable=true
prometheus.listen=0.0.0.0:9092

[gossip]
# Gossip network settings
gossip.pinned-syncers=03e3ef10ca6bfd79f3e9dcd9e467208af8be95c3ef4c7175dc4fe9b4c3c3d6b1a6

[routing]
# Routing settings for better pathfinding
routing.strictgraph=true
routing.assumechanvalid=true

[workers]
# Worker settings for better performance
workers.read=100
workers.write=100
workers.sig=100

[caches]
# Cache settings
caches.channel-cache-size=50000
caches.reject-cache-size=50000

[protocol]
# Protocol settings
protocol.sync-freelist=true

[db]
# Database settings
db.batch-commit-interval=500ms

[rpcmiddleware]
# RPC middleware for request handling
rpcmiddleware.enable=true
rpcmiddleware.intercepttimeout=30s

[healthcheck]
# Health check settings
healthcheck.chainbackend.interval=1m
healthcheck.diskspace.interval=1m